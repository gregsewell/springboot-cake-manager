<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Cake Manager</title>
</head>
<body>

    <h1>Cake Manager</h1>
    <p>The number one place on the web to manage all your cakes!!!!</p>
    <h2>The Cake List</h2>

    <style>
        img.cakes {width:200; height:200;}
    </style>

    <body>
        <table>
            <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Image</th>
            </tr>
            </thead>
            <tbody id="cakes">
            </tbody>
        </table>

        <script>
            async function getCakeData() {
                const response = await fetch("/cakes");
                const cakes = await response.json();
                console.log(cakes);

                // Update the cakes table with the cakes data from the REST API
                var tbody = document.getElementById("cakes");

                for (var i=0; i < cakes.length; i++) {
                    var row = tbody.insertRow(i);

                    // Title
                    var cell = row.insertCell();
                    cell.appendChild(document.createTextNode(cakes[i].title));

                    // Description
                    cell = row.insertCell();
                    cell.appendChild(document.createTextNode(cakes[i].desc));

                    // Image
                    cell = row.insertCell();
                    var img = document.createElement("img");
                    img.src = cakes[i].image;
                    cell.appendChild(img);
                }
             }
             getCakeData();
        </script>

    </body>



</body>
</html>