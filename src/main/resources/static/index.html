<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cake Manager</title>
    <link rel="stylesheet" href="cake-style.css"/>
</head>
<body>
    <h1 class="app-title">Cake Manager</h1>
    <p class="app-desc">The number one place on the web for cake!</p>

    <div class="app-results" id="cakes-list">
    </div>

    <script>
        // Template literal for a cake
        function cakeTemplate(cake) {
          return `
            <div class="cake">
                <img class="cake-photo" src="${cake.image}">
                <h2 class="cake-name">${cake.title}</h2>
                <p class="cake-desc">${cake.desc}</p>
            </div>
          `;
        }

        // Download the list of cakes data and then call the cakeTemplate to render each cake
        async function getCakeData() {
            const response = await fetch("/cakes");
            const cakes = await response.json();
            console.log(cakes);

            document.getElementById("cakes-list").innerHTML = `
            <p class="app-results"> The Cake List (${cakes.length} cakes)</p>
            ${cakes.map(cakeTemplate).join("")}`
        }
        getCakeData();
    </script>

    </body>
</html>